<!DOCTYPE html>
<html>
<head>
  <title>Data Grid with Export</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap4.min.css">
</head>
<body>

<div class="container mt-5">
  <h1>Data Grid with Export</h1>
  <div class="row mb-3">
    <div class="col">
      <div class="form-group">
        <label for="rowsPerPageSelect">Rows per Page:</label>
        <select id="rowsPerPageSelect" class="form-control">
          <option value="5">5</option>
          <option value="10">10</option>
          <option value="25">25</option>
          <option value="50">50</option>
          <option value="100">100</option>
        </select>
      </div>
     
    </div>
  </div>

  <table id="dataGrid" class="table table-striped">
    <thead>
      <tr>
        <th><input type="checkbox" id="selectAllCheckbox"></th>
        <th>ID</th>
        <th>Title</th>
        <th>Completed</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.print.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.7.1/css/buttons.dataTables.min.css">

<script>
$(document).ready(function() {
  var dataGrid = $('#dataGrid').DataTable({
    dom: 'Bfrtip',
    buttons: ['excel', 'pdf', 'csv', 'print'],
    lengthMenu: [5, 10, 25, 50, 100],
    pageLength: 5
  });

  // Fetch data from the REST API
  $.ajax({
    url: 'https://jsonplaceholder.typicode.com/todos', // JSONPlaceholder API endpoint
    method: 'GET',
    dataType: 'json',
    success: function(response) {
      // Populate the data grid with the retrieved data
      response.forEach(function(todo) {
        var checkbox = $('<input type="checkbox" class="row-checkbox">');
        var row = dataGrid.row.add([
          checkbox.prop('outerHTML'),
          todo.id,
          todo.title,
          todo.completed ? 'Yes' : 'No'
        ]).draw().node();
        $(row).attr('data-id', todo.id);
      });
    },
    error: function(xhr, status, error) {
      console.log('Error:', error);
    }
  });

  // Select All checkbox
  $('#selectAllCheckbox').on('change', function() {
    $('.row-checkbox').prop('checked', $(this).prop('checked'));
  });

  // Individual row checkbox
  $(document).on('change', '.row-checkbox', function() {
    if ($('.row-checkbox:checked').length === $('.row-checkbox').length) {
      $('#selectAllCheckbox').prop('checked', true);
    } else {
      $('#selectAllCheckbox').prop('checked', false);
    }
  });

  // Rows per Page select
  $('#rowsPerPageSelect').on('change', function() {
    var value = $(this).val();
    dataGrid.page.len(value).draw();
  });
});
</script>

</body>
</html>
